# CLR (Common Language Runtime) 이란?

마이크로 소프트 이니셔티브에서 제공하는 가상 머신의 구성요소이다. 프로그램 코드를 위한 실행 환경을 정의하는 마이크로소프트의 공통 언어 기반(CLI)표준의 기능이다. C#이나 VB닷넷과 같은 언어로 프로그래밍하며, 해당 언어의 컴파일러가 소스 코드를 공통 중간 언어(IL) 코드로 변환한다. 
<br>
<br>CLR은 관리되는 코드(managed code)를 실행하기 위한 런타임이다. C#은 여러 관리되는 언어중 하나인데, 관리되는 언어로 작성한 소스코드를 컴파일 하면 관리되는 코드가 생성된다. 관리되는 코드를 실행 파일또는 라이브러리(.dll)형태로 만들고 그것을 형식 정보, 즉 메타자료와 함께 하나의 패키지로 묶은 것을 어셈블리라고 한다. 어셈블리를 적재 할 때 CLR은 IL코드를 해당 컴퓨터(x86 등) 고유의 기계어 코드로 변환한다. 이러한 변환을  담당하는 것이 CLR의 JIT(Just - in - time)컴파일러이다. 어셈블리는 원래의 원본 언어의 구성을 거의 그대로 유지하기 때문에, 코드를 조사하기 쉽고 심지어 동적으로 생성하기도 쉽다.



### CLR

CLR은 .NET환경을 설치할 때 같이 설치되는 구성요소이고, 운영체제가 이해할 수 있는 코드로 변경되어 실행되게되는데,

닷넷 환경은 이 CLR덕분에 C++이나 VB, C#을 제공할 수 있다.

 

C#이던 C++이던 일단 각각의 컴파일러로 컴파일을 하면 공통의 IL Code(byte)가 생성이 되는데 이를 CLR이 OS가 이해할 수 있는 언어인 Native Code로 변환하여 실행할 수 있도록 한다. 
그리고 이 Native Code는 Just In Time Complie기반으로 실행이 되는데 이는 실행이 될때마다 매번 실시간으로 컴파일을 하여 실행을 한다는 의미이다. 그리고 이 때마다 CLR은 실행하고자 하는 환경에 최적화된 컴파일 코드를 만든다.

![image](https://github.com/gami03/TIL/assets/128332485/26e57fa6-75e9-41b7-9b9f-b193557b377a)

## 정리

다시말해 CLR이 지원하는 어떠한 언어든 사용자가 컴파일을 해서 .exe 파일로 만들면 CLR이 메모리에 로드되고 .exe를 기계어로 변역한 후 OS위에서 실행을 한다. 
단 .NET Framework가 설치된 환경에서, 한 마디로 마이크로소프트 윈도우 운영체제에서 실행된다.
<br><br>
제일 중요한 쓰는 이유는 환경에 최적화된 코드를 돌리기 위해서 이다.
